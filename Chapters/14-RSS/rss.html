<!DOCTYPE html>
<html>
  <head>
    <title>Pharo Book</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
<link href="/DynamicWebDevelopmentWithSeaside/_support/html/css/font-awesome.min.css" rel="stylesheet">
<link href="/DynamicWebDevelopmentWithSeaside/_support/html/css/nucleus.css" rel="stylesheet">
<link href="/DynamicWebDevelopmentWithSeaside/_support/html/css/flex.css" rel="stylesheet">
<link rel="stylesheet" href="/DynamicWebDevelopmentWithSeaside/_support/html/css/bootstrap.min.css">
<script src="/DynamicWebDevelopmentWithSeaside/_support/html/js/jquery-2.x.min.js"></script>
<script src="/DynamicWebDevelopmentWithSeaside/_support/html/highlightjs/highlight.pack.js"></script>
<script src="/DynamicWebDevelopmentWithSeaside/_support/html/js/highlight-commands.js"></script>
<meta name="description" content="">
<meta name="author" content="StÃ©phane Ducasse \ (based on S. Ducasse, D.C. Shaffer, L. Renggli, and R. Zaccone)">
  </head>
  <body>
    <header>
  <div class="logo">
    <a class="baselink" href="/DynamicWebDevelopmentWithSeaside/">Pharo Book</a>
  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
  
</header>
<article>
  <aside>
    <ul class="menu">
   		<li data-nav-id="123" class="dd-item">
    		<a href="/DynamicWebDevelopmentWithSeaside">
		       <i class="fa fa-fw fa-home"></i>
	    	</a>
        </li>

		
		  <li class="dd-item  haschildren ">
			<div>
			  <a href="/DynamicWebDevelopmentWithSeaside/index.html#getting started">
					Getting Started
			  </a>
			   <i class="fa fa-angle-right fa-lg category-icon"></i> 
			</div>
			  <ul class="dd-item">
				
		   	  	<li class="dd-item  haschildren ">
					<div>
						<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#getting started in gemstone/s">
							Getting Started in Gemstone/S
						</a>
						<i class="fa fa-angle-right fa-lg category-icon"></i>
					</div>

					<ul class="dd-item">
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#using the glass virtual appliance">Using the GLASS Virtual Appliance</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#a first seaside component">A first Seaside Component</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#defining a component">Defining a Component</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#defining some methods">Defining Some Methods</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#rendering a counter">Rendering a Counter</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#registering the application">Registering the application</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#adding behavior">Adding Behavior</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/Chapters/02-Gemstone/Gemstone.html#keeping up with the latest features">Keeping Up with the Latest Features</a>
						</li>
					
					</ul>						
				</li>
				
		   	  	<li class="dd-item ">
					<div>
						<a href="/DynamicWebDevelopmentWithSeaside/index.html#gemstone version">
							Gemstone version
						</a>
						
					</div>

					<ul class="dd-item">
					
					</ul>						
				</li>
				
			  </ul>
		  
		  </li>
		
		  <li class="dd-item ">
			<div>
			  <a href="/DynamicWebDevelopmentWithSeaside/index.html#fundamentals">
					Fundamentals
			  </a>
			  
			</div>
			  <ul class="dd-item">
				
			  </ul>
		  
		  </li>
		
		  <li class="dd-item ">
			<div>
			  <a href="/DynamicWebDevelopmentWithSeaside/index.html#using components">
					Using Components
			  </a>
			  
			</div>
			  <ul class="dd-item">
				
			  </ul>
		  
		  </li>
		
		  <li class="dd-item  haschildren ">
			<div>
			  <a href="/DynamicWebDevelopmentWithSeaside/index.html#seaside in action">
					Seaside in Action
			  </a>
			   <i class="fa fa-angle-right fa-lg category-icon"></i> 
			</div>
			  <ul class="dd-item">
				
		   	  	<li class="dd-item  haschildren ">
					<div>
						<a href="/DynamicWebDevelopmentWithSeaside/index.html#wish list of new chapter">
							Wish list of new chapter
						</a>
						<i class="fa fa-angle-right fa-lg category-icon"></i>
					</div>

					<ul class="dd-item">
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/index.html#willow?">Willow?</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/index.html#bootstrap">Bootstrap</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/index.html#mdl">MDL</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/index.html#mustaside">Mustaside</a>
						</li>
							
						<li class="dd-item">
							<a href="/DynamicWebDevelopmentWithSeaside/index.html#websockets">WebSockets</a>
						</li>
					
					</ul>						
				</li>
				
			  </ul>
		  
		  </li>
		
    </ul>
  </aside>

  <section class="page">
    
	<h1>Dynamic Web Development with Seaside</h1>
		
	<h2>A Really Simple Syndication</h2>
<a id="cha:rss"></a>

<p>
RSS is a special XML format used to publish frequently updated content, such as blog posts, news items or podcasts. Users don't need to check their favorite web site for updates. Rather, they can subscribe to a URL and be notified about changes automatically. This is can be done using a dedicated tool called <em>feed reader</em> or <em>aggregator</em>, but most web browsers integrate this capability as part of their core functionality. 
</p>
<p>
The RSS XML format is very much like XHTML, but much simpler. As standardised in the <a href="http://cyber.law.harvard.edu/rss/rss.html">RSS 2.0 Specification</a>, RSS essentially is composed of two parts, the <em>channel</em> and the <em>news item</em> specifications. While the channel describes some general properties of the news feed, the items contain the actual stories that change over time. Below we see an example of such a feed.  We will see how the same feed is presented within a feed reader.
</p>
<figure><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;rss version=&quot;2.0&quot;&gt;
   &lt;channel&gt;
      &lt;title&gt;Seaside ToDo&lt;/title&gt;
      &lt;link&gt;http://localhost:8080/todo&lt;/link&gt;
      &lt;description&gt;There are always things left to do.&lt;/description&gt;
      &lt;item&gt;
         &lt;title&gt;Smalltalk&lt;/title&gt;
         &lt;description&gt;(done) 5 March 2008&lt;/description&gt;
      &lt;/item&gt;
      &lt;item&gt;
         &lt;title&gt;Seaside&lt;/title&gt;
         &lt;description&gt;5 September 2008&lt;/description&gt;
      &lt;/item&gt;
      &lt;item&gt;
         &lt;title&gt;Scriptaculous&lt;/title&gt;
         &lt;description&gt;7 September 2008&lt;/description&gt;
      &lt;/item&gt;
   &lt;/channel&gt;
&lt;/rss&gt;</code></pre><figcaption></figcaption></figure>

<h3>Creating a News Feed</h3>

<p>
There is a Seaside package extension that helps us to build such feeds in a manner similar to what we used to build XHTML for component rendering. Let's create a news feed for our todo items.
</p>
<p>
<strong>Define the Feed Component.</strong> The package defines a root class named <code>RRComponent</code> that allows you to describe both the news feed channel (title, description, language, date of publication) and also the news items. Therefore, the next step is to create a new subclass of <code>RRComponent</code> named <code>ToDoRssFeed</code>. This will be the entry point of our feed generator. In our example, we don't need extra instance variables.
</p>
<figure><pre><code>RRComponent subclass: #ToDoRssFeed
    instanceVariableNames: ''
    classVariableNames: ''
    package: 'ToDo-RSS'</code></pre><figcaption></figcaption></figure>

<p>
<strong>Register the Component as Entry Point.</strong> Next we need to register the component at a fixed URL. The aggregator will use this URL to access the feed. We do this by adding a class side initialize method. Don't forget to evaluate the code.
</p>
<figure><pre><code>ToDoRssFeed class &gt;&gt; initialize
    (WAAdmin register: RRRssHandler at: 'todo.rss')
        rootComponentClass: self</code></pre><figcaption></figcaption></figure>
<p>
	
At this point we can begin to download our feed at <a href="http://localhost:8080/todo.rss">http://localhost:8080/todo.rss</a>, however it is mostly empty except for some standard markup as shown by the following RSS file.
</p>
<p class="note">Your browser may be set up to handle RSS feeds automatically, so you may have difficulty in examining the raw source.</p>
<figure><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;rss version=&quot;2.0&quot;&gt;
    &lt;channel&gt;
    &lt;/channel&gt;
&lt;/rss&gt;</code></pre><figcaption></figcaption></figure>


<h3>Render the Channel Definition</h3>

<p>
Next we create the contents of the feed. To do so we need to access our model and pass the data to the RSS renderer. As a first step we render the required tags of the channel element.
</p>
<figure><pre><code>ToDoRssFeed &gt;&gt; model
    ^ ToDoList default</code></pre><figcaption></figcaption></figure>

<figure><pre><code>ToDoRssFeed &gt;&gt; renderContentOn: rss
    self renderChannelOn: rss</code></pre><figcaption></figcaption></figure>

<figure><pre><code>ToDoRssFeed &gt;&gt; renderChannelOn: rss
    rss title: self model title.
    rss link: 'http://localhost:8080/todo'.
    rss description: 'There are always things left to do.'</code></pre><figcaption></figcaption></figure>

<p>
A full list of all available tags is available in the following table.
</p>
<table style="border: solid thin"><tr><th style="text-align: left">RSS Tag</th>
<th style="text-align: left">Selector</th>
<th>Description</th>
</tr>
<tr><td><code>title</code></td>
<td><code>title:</code></td>
<td>The name of the channel (required).</td>
</tr>
<tr><td><code>link</code></td>
<td><code>link:</code></td>
<td>The URL to website corresponding to the channel (required).</td>
</tr>
<tr><td><code>description</code></td>
<td><code>description:</code></td>
<td>Phrase or sentence describing the channel (required).</td>
</tr>
<tr><td><code>language</code></td>
<td><code>language:</code></td>
<td>The language the channel is written in.</td>
</tr>
<tr><td><code>copyright</code></td>
<td><code>copyright:</code></td>
<td>Copyright notice for content in the channel.</td>
</tr>
<tr><td><code>managingEditor</code></td>
<td><code>managingEditor:</code></td>
<td>Email address for person responsible for editorial content.</td>
</tr>
<tr><td><code>webMaster</code></td>
<td><code>webMaster:</code></td>
<td>Email address for person responsible for technical issues.</td>
</tr>
<tr><td><code>pubDate</code></td>
<td><code>pubDate:</code></td>
<td>The publication date for the content in the channel.</td>
</tr>
<tr><td><code>lastBuildDate</code></td>
<td><code>lastBuildDate:</code></td>
<td>The last time the content of the channel changed.</td>
</tr>
<tr><td><code>category</code></td>
<td><code>category:</code></td>
<td>Specify one or more categories that the channel belongs to.</td>
</tr>
<tr><td><code>generator</code></td>
<td><code>generator:</code></td>
<td>A string indicating the program used to generate the channel.</td>
</tr>
</table>

<h3>Rendering News Items</h3>

<p>
Finally, we want to render the todo items. Each news item is enclosed within a <code>item</code> tag. We will display the title and show the due date as part of the description. Also we prepend the string <code>(done)</code>, if the item has been completed.
</p>
<figure><pre><code>ToDoRssFeed &gt;&gt; renderContentOn: rss
    self renderChannelOn: rss.
    self model items
        do: [ :each | self renderItem: each on: rss ]</code></pre><figcaption></figcaption></figure>

<figure><pre><code>ToDoRssFeed &gt;&gt; renderItem: aToDoItem on: rss
    rss item: [
        rss title: aToDoItem title.
        rss description: [
            aToDoItem done
                ifTrue: [ rss text: '(done) ' ].
            rss render: aToDoItem due ] ]</code></pre><figcaption></figcaption></figure>
<p>
		
Doing so will generate the required XML structure for the item tag.
</p>
<figure><pre><code>&lt;item&gt;
    &lt;title&gt;Smalltalk&lt;/title&gt;
    &lt;description&gt;(done) 5 March 2008&lt;/description&gt;
&lt;/item&gt;</code></pre><figcaption></figcaption></figure>

<p>
At the minimum, a title or a description must be present. All the other sub-elements are optional. 
</p>
<table style="border: solid thin"><tr><th style="text-align: left">RSS Tag</th>
<th style="text-align: left">Selector</th>
<th>Description</th>
</tr>
<tr><td><code>title</code></td>
<td><code>title</code></td>
<td>The title of the item.</td>
</tr>
<tr><td><code>link</code></td>
<td><code>link</code></td>
<td>The URL of the item.</td>
</tr>
<tr><td><code>description</code></td>
<td><code>description</code></td>
<td>Phrase or sentence describing the channel.</td>
</tr>
<tr><td><code>author</code></td>
<td><code>author</code></td>
<td>The item synopsis.</td>
</tr>
<tr><td><code>category</code></td>
<td><code>category</code></td>
<td>Includes the item in one or more categories.</td>
</tr>
<tr><td><code>comments</code></td>
<td><code>comments</code></td>
<td>URL of a page for comments relating to the item.</td>
</tr>
<tr><td><code>enclosure</code></td>
<td><code>enclosure</code></td>
<td>Describes a media object that is attached to the item.</td>
</tr>
<tr><td><code>guid</code></td>
<td><code>guid</code></td>
<td>A string that uniquely identifies the item.</td>
</tr>
<tr><td><code>pubDate</code></td>
<td><code>pubDate</code></td>
<td>Indicates when the item was published.</td>
</tr>
<tr><td><code>source</code></td>
<td><code>source</code></td>
<td>The RSS channel that the item came from.</td>
</tr>
</table>

<h3>Subscribe to the Feed</h3>

<p>
Now we have done all that is required to let users subscribe. Figure <a href="#feed-vienna"></a>  shows
how the feed is presented to the user in the feed reader when the URL was added manually.
</p>
<p>
<a id="feed-vienna"></a>
<figure>
	<img src="figures/feed-vienna.png" width="70%" id="feed-vienna" alt="The ToDo Feed subscribed."/>
	<figcaption>The ToDo Feed subscribed.</figcaption>
</figure>
</p>
<p>
One remaining thing to do is to tell the users of our todo application where they can subscribe to the RSS feed. Of course we could simply put an anchor at the bottom our web application, however there is a more elegant solution. We override the method  <code>WAComponent&gt;&gt;updateRoot:</code> in our Seaside component to add a link to our feed into the XHTML head. Most modern web browser will pick up this tag and show the RSS logo in the toolbar to allow people to register for the feed with one click.
</p>
<figure><pre><code>ToDoListView &gt;&gt; updateRoot: aHtmlRoot
    super updateRoot: aHtmlRoot.
    aHtmlRoot link
        beRss;
        title: self model title;
        url: 'http://localhost:8080/todo.rss'</code></pre><figcaption></figcaption></figure>
<p>
	
Note the use of the message <code>beRss</code> tells the web browser that the given link points to an RSS feed.
</p>
<p>
In Firefox you may have to add the relationship property to make the rss logo visible.
 
</p><figure><pre><code>updateRoot: aHtmlRoot
    super updateRoot: aHtmlRoot.
    aHtmlRoot link
        beRss;
        relationship: 'alternate';
        title: self model title;
        url: 'http://localhost:8080/todo.rss'</code></pre><figcaption></figcaption></figure>
<p>
	
</p><h3>Summary</h3>

<p>
In Seaside you don't manipulate tags directly. The elegant generation of RSS feeds nicely shows how the canvas can be extended to produce something other than XHTML. In particular, it is important to see that Seaside is not limited to serve XHTML but can be extended to serve SVG, WAP and RSS.
</p>

  </section>

</article>

<footer>

<div class="footline">
    <div class="github-link">
      <a href="" target="blank"><i class="fa fa-code-fork"></i>Github</a>
    </div>
  </div>
</footer>

<script src="/DynamicWebDevelopmentWithSeaside/_support/html/js/clipboard.min.js"></script>


<link rel="stylesheet" href="/DynamicWebDevelopmentWithSeaside/_support/html/highlightjs/styles/default.css">
<link rel="stylesheet" href="/DynamicWebDevelopmentWithSeaside/_support/html/css/highlight-commands.css">
<link href="/DynamicWebDevelopmentWithSeaside/_support/html/css/featherlight.min.css" rel="stylesheet">
<script src="/DynamicWebDevelopmentWithSeaside/_support/html/js/featherlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/DynamicWebDevelopmentWithSeaside/_support/html/js/flex.js"></script>
<!-- Prettify annotated paragraphs-->
    <script src="/DynamicWebDevelopmentWithSeaside/_support/html/js/annotated-paragraphs.js"></script>

  </body>
</html>
